[tox]
envlist = py27, pypy
[testenv]
deps =
    unittest2
    nose
    nose-timer
    coverage
    mock
    python-snappy
commands =
    nosetests {posargs:-v --with-id --with-timer --timer-top-n 10 \
        --with-coverage --cover-erase --cover-tests --cover-package afkak \
        --logging-level=INFO \
        --logging-format='%(asctime)s %(levelname)s: %(message)s'} \
        afkak/test/test_brokerclient.py \
        afkak/test/test_client.py \
        afkak/test/test_codec.py \
        afkak/test/test_common.py \
        afkak/test/test_consumer.py \
        afkak/test/test_kafkacodec.py \
        afkak/test/test_package.py \
        afkak/test/test_partitioner.py \
        afkak/test/test_protocol.py \
        afkak/test/test_util.py \
        afkak/test/test_producer.py

setenv =
    PROJECT_ROOT = {toxinidir}
passenv = KAFKA_VERSION CPPFLAGS
